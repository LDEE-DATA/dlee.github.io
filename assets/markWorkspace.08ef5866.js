import{a0 as ze,a1 as se,e as fe,f as p,A as Je,a2 as Ze,h as be,l as W,U as We,q as d,b as He,o as n,c as m,a as s,t as C,z as T,m as l,n as o,y as K,F as j,p as M,N as le,a3 as he,E as J,a4 as et,a5 as Re,a6 as tt,a7 as lt,J as Ge,D as Fe,G as ke,_ as pe,a8 as st,w as Ne,a9 as re,aa as te,ab as je,ac as ut,ad as Te,ae as Ue,af as at,ag as xe,j as de,ah as Le,ai as qe,H as Pe,aj as nt,ak as Me,al as ot,am as it,an as rt,T as dt,ao as $e}from"./index.b14b041f.js";import{s as q}from"./request.ff065028.js";import{s as Ke}from"./regexpUtil.d17c4edf.js";const ge=ze("selectedmarkWords",{state:()=>({words:[]}),getters:{word(){return this.words.sort((r,h)=>r.id-h.id)}},actions:{add(r){this.words.push(r)},remove(r){this.words.splice(this.words.map(h=>h.id).indexOf(r.id),1)},removeAll(){this.words=[]},exist(r){for(let h of this.words)if(r==h.id)return!0;return!1}}}),Y=ze("markResult",{state:()=>({case_facts:"",case_name:"",event_type:"",type_ID:0,trigger:[],arguments:[],case_judgement:{}}),getters:{markResult(){return{event_type:this.event_type,type_ID:this.type_ID,trigger:se(this.trigger),arguments:se(this.arguments),case_judgement:se(this.case_judgement)}},getFact(){return this.case_facts},finalResult(){return{case_name:this.case_name,case_facts:this.case_facts,event_type:this.event_type,type_ID:this.type_ID,trigger:se(this.trigger),arguments:se(this.arguments),case_judgement:se(this.case_judgement)}}},actions:{updateEventType(r,h){this.$state.event_type=r,this.$state.type_ID=h},updateTriggers(r){this.$state.trigger=r},updateJudgement(r){this.$state.case_judgement=r},updateArgument(r){this.$state.arguments=r},updateFactAndName(r,h){this.$state.case_facts=r,this.$state.case_name=h}}}),z=ze("markList",{state:()=>({ids:[],todoIds:[],recordIds:[],count:0}),getters:{length(){return this.ids.length},current(){return this.ids[this.count%this.length]},currentId(){return this.todoIds[this.count%this.length]},currentRecordId(){return this.recordIds[this.count%this.length]},status(){return`\u5171\u8BA1${this.length}\u6761,\u5F53\u524D\u5904\u7406\u5230${this.count+1}\u6761`}},actions:{updateList(r){this.$state.ids=r,this.$state.count=0},updateTodoIds(r){this.$state.todoIds=r},updateRecordIds(r){this.$state.recordIds=r},next(){this.$state.count=(this.$state.count+1)%this.length},jump(r){for(let h=0;h<this.todoIds.length;h++)r==this.todoIds[h]&&(this.$state.count=h%this.length)},prev(){this.$state.count=(this.$state.count-1+this.length)%this.length},delete(r){let h=this.$state.todoIds;for(let x=0;x<h.length;x++)h[x]==r&&(this.$state.ids=this.$state.ids.filter($=>$!=this.$state.ids[x]),this.$state.recordIds=this.$state.recordIds.filter($=>$!=this.$state.recordIds[x]));this.$state.todoIds=this.$state.todoIds.filter(x=>x!=r)}}}),Oe=r=>(Fe("data-v-07b4e460"),r=r(),ke(),r),ct={key:0,class:"case_content"},mt={class:"container"},ft={class:"title"},pt={class:"basic"},vt=Oe(()=>s("span",{class:"hint"},"[\u57FA\u672C\u60C5\u51B5]\uFF1A",-1)),_t={class:"displayText"},gt=["onClick"],ht={key:1,class:"displayText"},Ft={class:Ge("")},kt={class:"fixResult"},yt={class:"cpfxgc"},Et=Oe(()=>s("span",{class:"hint"},"[\u88C1\u5224\u5206\u6790\u8FC7\u7A0B]\uFF1A",-1)),Ct={class:"displayText"},At={class:"result"},xt=Oe(()=>s("span",{class:"hint"},"[\u5224\u51B3\u7ED3\u679C]\uFF1A",-1)),$t=fe({__name:"caseContent",props:{detailId:String},setup(r){const h=r;let x=p({id:"",name:"",analysisProcess:"",paperId:"",paperName:"",result:""});const $=p(!1);p(!1);const I=p(!1),w=p(!1),f=v=>{w.value=I.value,I.value=!1,$.value=!0,q.get("/crime/paper/"+v).then(async g=>{let R=[],b=0;if(g.data.baseInfo)for(let y of Ke(g.data.baseInfo))y!=""&&await q.post("/word/cut",{word:y}).then(E=>{R.push(E.data.cutList.map(Z=>({id:b++,value:Z})))});g.data.analysisProcess!=null&&(g.data.processArr=Ke(g.data.analysisProcess)),g.data.baseInfoArr=R,g.data.baseInfoArrFortag=g.data.baseInfo.split(""),x.value=g.data,setTimeout(()=>{I.value=w.value},2e3),Y().updateFactAndName(g.data.baseInfo,g.data.name)}).finally(()=>$.value=!1)},i=v=>{let g=document.getElementsByClassName("displayItem_"+v.id)[0];ge().exist(v.id)?(g.classList.remove("checked"),ge().remove(v)):(g.classList.add("checked"),ge().add(v))},D=()=>{document.querySelectorAll(".checked").forEach(v=>{v.classList.remove("checked"),ge().removeAll()})},P=v=>{he.prompt("\u62A5\u8BEF\u539F\u56E0","Tip",{confirmButtonText:"\u63D0\u4EA4",cancelButtonText:"\u53D6\u6D88"}).then(({value:g})=>{let b={todoId:z().currentId,reason:g};q.post("/blockTodo",b).then(y=>{y.data?J.success("\u53CD\u9988\u6210\u529F\uFF0C\u7B49\u5F85\u5904\u7406"):J.warning(y.msg)})})},k=(v,g,R=!1)=>{var Z;let b=!1;const y=document.querySelector(".basic .displayText"),E=y==null?void 0:y.getElementsByTagName("span");if(!R)for(let H=0;H<v.length;H++){let F=document.createElement("span"),ue=[];for(let ee=0;ee<E.length;ee++){let ne=(Z=E.item(ee))==null?void 0:Z.innerText;if(ne!=""){if(F.textContent==v[H].value){let S=document.createElement("span");S.style.backgroundColor="#fff",S.style.color="#2CB3FF",S.style.padding="3px",S.style.fontSize="12px",S.style.borderRadius="3px",S.style.marginLeft="5px",S.style.marginBottom="2px",S.innerText=v[H].role,F.appendChild(S);break}if(v[H].value.indexOf(ne)==-1){if(b)if(b=!1,F.textContent==v[H].value){let S=document.createElement("span");S.style.backgroundColor="#fff",S.style.color="#2CB3FF",S.style.padding="3px",S.style.fontSize="12px",S.style.borderRadius="3px",S.style.marginLeft="5px",S.style.marginBottom="2px",S.innerText=v[H].role,F.appendChild(S);break}else F=document.createElement("span"),ue=[];continue}else{b||(F.style.backgroundColor="#00A4FF",F.style.borderRadius="3px",F.style.color="#FFF",F.style.padding="5px",F.style.lineHeight="50px",b=!0);let S=document.createElement("span");S.innerText=ne,F.appendChild(S),ue.push(E.item(ee))}}}ue.length!=0&&(y==null||y.replaceChild(F,ue[0]),ue.forEach(ee=>{ee.remove()}))}};return Je(()=>h.detailId,v=>{f(v)}),z().$subscribe((v,g)=>{f(z().current)},{detached:!1}),Y().$subscribe((v,g)=>{}),Ze(()=>{I.value&&k(Y().arguments,"",!1)}),be(()=>{setTimeout(()=>{f(z().current)},200)}),(v,g)=>{const R=W("el-icon"),b=We("loading");return d(x)?He((n(),m("div",ct,[s("div",mt,[s("div",ft,[C(T(d(x).name)+" ",1),l(R,{color:"#67C23A",style:{float:"right",cursor:"pointer"},onClick:D},{default:o(()=>[l(d(et))]),_:1}),l(R,{color:"red",style:{float:"right",cursor:"pointer",right:"10px"},onClick:g[0]||(g[0]=y=>P(d(x)))},{default:o(()=>[l(d(Re))]),_:1}),I.value?(n(),K(R,{key:1,color:"#007ACC",style:{float:"right",cursor:"pointer",right:"20px"},onClick:g[2]||(g[2]=y=>I.value=!I.value)},{default:o(()=>[l(d(lt))]),_:1})):(n(),K(R,{key:0,color:"#007ACC",style:{float:"right",cursor:"pointer",right:"20px"},onClick:g[1]||(g[1]=y=>I.value=!I.value)},{default:o(()=>[l(d(tt))]),_:1}))]),s("div",pt,[vt,I.value?(n(),m("div",ht,[(n(!0),m(j,null,M(d(x).baseInfoArrFortag,y=>(n(),m("span",Ft,T(y),1))),256))])):(n(!0),m(j,{key:0},M(d(x).baseInfoArr,y=>(n(),m("div",_t,[(n(!0),m(j,null,M(y,E=>(n(),m("span",{class:Ge("displayItem_"+E.id),onClick:Z=>i(E)},T(E.value),11,gt))),256))]))),256))]),s("div",kt,[s("div",yt,[Et,s("div",null,[(n(!0),m(j,null,M(d(x).processArr,y=>(n(),m("div",Ct,T(y),1))),256))])]),s("div",At,[xt,C(T(d(x).result),1)])])])])),[[b,$.value]]):le("",!0)}}});const bt=pe($t,[["__scopeId","data-v-07b4e460"]]),Be=r=>(Fe("data-v-cdf15cb9"),r=r(),ke(),r),Bt={class:"container"},wt=Be(()=>s("div",{class:"lable"},"\u64CD\u4F5C\u5DE5\u4F5C\u53F0",-1)),Dt={class:"content"},It={class:"crimeName"},Vt=Be(()=>s("div",null,"\u7F6A\u540D\u6807\u7B7E\uFF1A",-1)),St={class:"crimeSelector"},Tt={class:"trigger"},Rt=Be(()=>s("div",null,"\u89E6\u53D1\u8BCD\u6807\u6CE8\uFF1A",-1)),zt={class:"add"},Ot={class:"choose"},Nt={class:"argment"},jt={class:"argmentTitle"},Ut={class:"argmentItem"},Lt=["onContextmenu","onClick"],qt={class:"add"},Pt={class:"choose"},Mt={class:"judgement"},Kt=Be(()=>s("div",null,"\u5BA1\u5224\u7ED3\u679C\uFF1A",-1)),Jt={class:"judge_item"},Wt={class:"judge_item"},Ht={class:"judge_item"},Gt={class:"judge_item"},Qt={class:"judge_item"},Xt={class:"judge_item"},Yt={class:"judge_item"},Zt={class:"submit"},el=fe({__name:"chooseBox",props:["isValid"],emits:["previewResult","submitRecord"],setup(r,{emit:h}){const x=r,$=p(),I=p(),w=p(!1),f=p(""),i=p(0),D=p(!1),P=p(!1),k=p(""),v=p([]),g=p({id:0,name:"",trigger:"",argument:""});let R=3;const b=p([]),y=p(new Set([])),E=p([]),Z=p(new Set([])),H=p(new Set([])),F=p({case_statutes:"",punish_of_money:"",accusation:"",is_death_penalty:!1,is_life_imprisonment:!1,term_of_imprisonment:"",probation:""});p(!1);const ue=()=>{he.prompt("\u8F93\u5165\u5BF9\u5E94\u7684todoId","Tip",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88"}).then(({value:u})=>{z().jump(parseInt(u))})},ee=u=>{if(u.id==0)return;g.value=u,F.value.accusation=u.name,f.value=u.name,i.value=u.id;let t=1;y.value=new Set(u.trigger.split(",").map(c=>({id:t++,name:c}))),Z.value=new Set(u.argument.split(",").map(c=>({id:t++,role:c,value:"",start:0,end:0}))),H.value=new Set(u.argument.split(",").map(c=>c)),ie()},ne=u=>{u==0?(P.value=!0,je(()=>{I.value.input.focus()})):(D.value=!0,je(()=>{$.value.input.focus()}))},S=u=>{if(u==0)k.value&&b.value.push({id:R++,name:k.value}),P.value=!1,k.value="";else{if(k.value){let t=k.value.split(":");E.value.push({id:3,role:t[0],value:t[1],start:X(t[1]),end:X(t[1])+t[1].length})}D.value=!1,k.value=""}},X=u=>Y().finalResult.case_facts.indexOf(u),we=u=>{b.value.splice(b.value.map(t=>t.name).indexOf(u.name),1)},De=u=>(E.value.splice(E.value.map(t=>t.id).indexOf(u.id),1),oe(),!1),ye=u=>{he.prompt("\u4FEE\u6539\u5185\u5BB9","Tip",{confirmButtonText:"\u63D0\u4EA4",cancelButtonText:"\u53D6\u6D88",inputValue:u.value}).then(({value:t})=>{u.value=t,u.start=X(t),u.end=X(t)+t.length-1}).finally(()=>oe())},Ee=(u,t)=>{let c="";const A=se(ge().word);if(A.length!=0){for(let e of A)c+=e.value;u==0?b.value.push({id:++R,name:c}):(E.value.push({id:++R,role:t==null?void 0:t.role,value:c,start:X(c),end:X(c)+c.length-1}),oe())}},Ce=()=>{let u=Y().getFact;if(y.value.size==0){J.warning("\u8FD8\u6CA1\u6709\u9009\u62E9\u5BF9\u5E94\u7684schema");return}let t=0,c=y.value;b.value=[];for(let A of c)console.log(u.indexOf(A.name)),u.indexOf(A.name)!=-1&&(b.value.push({id:R++,name:A.name}),t++);J.success(`\u626B\u63CF\u7ED3\u675F\uFF0C\u5171\u627E\u5230${t}\u4E2A`)},ie=()=>{Y().updateArgument(E.value),Y().updateEventType(f.value,i.value),Y().updateJudgement(F.value),Y().updateTriggers(b.value)},_e=()=>{E.value=[],b.value=[],F.value={case_statutes:"",punish_of_money:"",is_death_penalty:!1,is_life_imprisonment:!1,term_of_imprisonment:"",probation:"",accusation:F.value.accusation}},Ie=async()=>{await q.get("/schema").then(u=>{v.value=u.data})},oe=()=>{let u=document.querySelectorAll(".argmentItem .argmentItems");if(u.length==0)return;let t=Y().getFact;u.forEach(c=>{let A=c.textContent,e=A==null?void 0:A.substring(A.indexOf(":")+1);t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())!=-1?c.classList.add("onRawText"):c.classList.contains("onRawText")&&c.classList.remove("onRawText")})},Ve=()=>{if(x.isValid){for(let u of v.value)if(u.name==f.value){ee(u);break}}ee(g.value)},_=()=>{let u=document.querySelectorAll(".argmentItem .argmentItems");if(u.length==0)return!1;for(let t=0;t<u.length;t++)if(!u.item(t).classList.contains("onRawText"))return!1;return!0},a=()=>{if(!_()){J.warning("\u6709\u8BBA\u6587\u4E0D\u5B58\u5728\u539F\u6587\u4E2D,\u8BF7\u68C0\u67E5!");return}ie(),h("submitRecord")};Y().$subscribe(()=>{}),z().$subscribe((u,t)=>{x.isValid&&U()},{detached:!1});const B=u=>{u?z().next():z().prev(),_e()},U=()=>{_e();let u=z().currentRecordId;q.get("/record/"+u).then(t=>{let c=t.data;E.value=JSON.parse(c.arguments.toString()),b.value=JSON.parse(c.triggers.toString()),F.value=JSON.parse(c.caseJudgement.toString()),E.value.sort(),f.value=c.eventType,i.value=c.typeID,Ve(),ie(),setInterval(()=>oe(),500)})},O=()=>{if(g.value.id==0){J.warning("\u8FD8\u6CA1\u6709\u9009\u62E9\u5BF9\u5E94\u7684schema");return}let u=g.value.id,t=z().current;w.value=!0,q.get("/chatgpt/ask/"+t+"/"+u).then(c=>{let A=c.answer;A=A.replaceAll("\uFF1B",`
`).replaceAll(`

`,`
`).replaceAll(" ","").replaceAll("\u8BBA\u5143\uFF1A",""),A.split(`
`).filter(V=>V.indexOf("\uFF1A")!=-1).forEach(V=>{let N=V.split("\uFF1A"),Q=N[1];if(H.value.forEach(me=>{N[0].indexOf(me.toString())!=-1&&(N[0]=me.toString())}),Q!="\u65E0")if(Q.indexOf("\u3001")==-1)if(Q.indexOf("\uFF0C")==-1)E.value.push({id:++R,role:N[0],value:Q,start:X(Q),end:X(Q)+Q.length-1});else{let me=Q.split("\uFF0C");for(let ae of me)E.value.push({id:++R,role:N[0],value:ae,start:X(ae),end:X(ae)+ae.length-1})}else{let me=Q.split("\u3001");for(let ae of me)E.value.push({id:++R,role:N[0],value:ae,start:X(ae),end:X(ae)+ae.length-1})}})}).finally(()=>{w.value=!1,oe()})},L=()=>{let u=Ae(F.value.case_statutes);F.value.case_statutes=u},ce=u=>{let t=F.value.term_of_imprisonment;u&&(t=F.value.probation);let c=0;if(t.indexOf(".")!=-1){let A=t.split(".");c=parseInt(A[0])*12+parseInt(A[1])}else c=parseInt(t)*12;u?F.value.probation=""+c:F.value.term_of_imprisonment=""+c},Se=()=>{const u=F.value.punish_of_money.replaceAll("\u5143",""),t=G(u);F.value.punish_of_money=""+t};function G(u){const t={\u96F6:0,\u4E00:1,\u58F9:1,\u4E8C:2,\u8D30:2,\u4E24:2,\u4E09:3,\u53C1:3,\u56DB:4,\u8086:4,\u4E94:5,\u4F0D:5,\u516D:6,\u9646:6,\u4E03:7,\u67D2:7,\u516B:8,\u634C:8,\u4E5D:9,\u7396:9,\u5341:10,\u62FE:10,\u767E:100,\u4F70:100,\u5343:1e3,\u4EDF:1e3,\u4E07:1e4,\u5341\u4E07:1e5,\u767E\u4E07:1e6,\u5343\u4E07:1e7,\u4EBF:1e8};let c=u.length;if(c==0)return-1;if(c==1)return t[u]<=10?t[u]:-1;let A=0;if(t[u[0]]==10&&(u="\u4E00"+u,c++),c>=3&&t[u[c-1]]<10){const N=t[u[c-2]];if(N==100||N==1e3||N==1e4||N==1e8){for(const Q in t)if(t[Q]==N/10){u+=Q,c+=Q.length;break}}}if(u.match(/亿/g)&&u.match(/亿/g).length>1)return-1;let e;if(e=u.split("\u4EBF"),e.length==2){const N=e[1]==""?0:G(e[1]);return A+G(e[0])*1e8+N}if(e=u.split("\u4E07"),e.length==2){const N=e[1]==""?0:G(e[1]);return A+G(e[0])*1e4+N}let V=0;for(;V<c;){const N=t[u[V]],Q=t[u[V+1]];Q>9&&(A+=N*Q),V++,V==c&&(A+=N<=9?N:0)}return A}function Ae(u){const t=new Map([["\u96F6",0],["\u4E00",1],["\u4E8C",2],["\u4E09",3],["\u56DB",4],["\u4E94",5],["\u516D",6],["\u4E03",7],["\u516B",8],["\u4E5D",9]]);let c=!1,A="";for(let e=0;e<u.length;e++){const V=u.charAt(e);t.has(V)?A+=t.get(V):V==="\uFF0C"||V==="\u3001"||V==="\u548C"||V==="\u4E14"?(A+=",",c=!1):V==="\u6761"?c=!0:V==="\u7B2C"?c&&(A+="."):V==="\u5341"?t.has(u.charAt(e-1))?t.has(u.charAt(e+1))||(A+="0"):A+="1":V==="\u767E"&&(t.has(u.charAt(e+1))||(A+="00"))}return A}return be(()=>{ie(),Ie().then(()=>{x.isValid&&U()}),window.oncontextmenu=function(u){u.preventDefault()}}),(u,t)=>{const c=W("el-icon"),A=W("el-switch");return n(),m("div",Bt,[wt,s("div",Dt,[s("div",It,[Vt,s("div",St,[l(d(st),{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),class:"crimeSelector0",placeholder:"\u7F6A\u540D",filterable:"",onChange:ee},{default:o(()=>[(n(!0),m(j,null,M(v.value,e=>(n(),K(d(ut),{key:e.id,label:e.name,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),s("div",Tt,[Rt,(n(!0),m(j,null,M(b.value,e=>(n(),K(d(Te),{key:e.id,class:"triggerItems",closable:"",onClose:V=>we(e),type:"danger"},{default:o(()=>[C(T(e.name),1)]),_:2},1032,["onClose"]))),128)),(n(!0),m(j,null,M(y.value,e=>(n(),K(d(Te),{key:e.id,class:"triggerItems",type:"info"},{default:o(()=>[C(T(e.name),1)]),_:2},1024))),128)),s("div",zt,[P.value?(n(),K(d(re),{key:0,ref_key:"triggerInputRef",ref:I,modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=e=>k.value=e),size:"small","disable-transitions":!1,onKeyup:t[2]||(t[2]=Ne(e=>S(0),["enter"])),onBlur:t[3]||(t[3]=e=>S(0))},null,8,["modelValue"])):(n(),K(d(te),{key:1,type:"info",size:"small",icon:d(Ue),circle:"",onClick:t[4]||(t[4]=e=>ne(0))},null,8,["icon"]))]),s("div",Ot,[l(d(te),{type:"success",size:"small",round:"",onClick:t[5]||(t[5]=e=>Ee(0))},{default:o(()=>[C("\u9009\u62E9\u89E6\u53D1\u8BCD")]),_:1}),l(d(te),{type:"primary",size:"small",round:"",onClick:Ce},{default:o(()=>[C("\u626B\u63CF\u4E00\u4E0B")]),_:1})])]),s("div",Nt,[s("div",jt,[C("\u8BBA\u5143\u6807\u6CE8\uFF1A "),l(c,{size:20,color:"#108"},{default:o(()=>[l(d(at),{onClick:oe})]),_:1})]),s("div",Ut,[(n(!0),m(j,null,M(E.value,e=>(n(),m("span",{class:"argmentItems",onContextmenu:V=>De(e),onClick:V=>ye(e)},T(e.role+":"+e.value),41,Lt))),256)),(n(!0),m(j,null,M(Z.value,e=>(n(),K(d(Te),{key:e.id,class:"triggerItems",type:"info",onClick:V=>Ee(1,e)},{default:o(()=>[C(T(e.role),1)]),_:2},1032,["onClick"]))),128))]),s("div",qt,[D.value?(n(),K(d(re),{key:0,ref_key:"argmentInputRef",ref:$,modelValue:k.value,"onUpdate:modelValue":t[6]||(t[6]=e=>k.value=e),size:"small","disable-transitions":!1,onKeyup:t[7]||(t[7]=Ne(e=>S(1),["enter"])),onBlur:t[8]||(t[8]=e=>S(1))},null,8,["modelValue"])):(n(),K(d(te),{key:1,type:"info",size:"small",icon:d(Ue),circle:"",onClick:t[9]||(t[9]=e=>ne(1))},null,8,["icon"]))]),s("div",Pt,[l(d(te),{color:"#626aef",size:"small",disabled:w.value,round:"",onClick:t[10]||(t[10]=e=>O())},{default:o(()=>[C(T(w.value?"\u6B63\u5728\u5904\u7406...":"AI\u667A\u80FD\u6807\u6CE8"),1)]),_:1},8,["disabled"])])]),s("div",Mt,[Kt,s("div",Jt,[C(" \u6CD5\u6761\uFF1A"),l(d(re),{modelValue:F.value.case_statutes,"onUpdate:modelValue":t[11]||(t[11]=e=>F.value.case_statutes=e),size:"small",class:"judge_item_input"},null,8,["modelValue"]),l(c,{style:{"margin-left":"5px",cursor:"pointer"},size:"16px",onClick:L},{default:o(()=>[l(d(xe),{color:"#589"})]),_:1})]),s("div",Wt,[C(" \u6B7B\u5211\uFF1A"),l(A,{modelValue:F.value.is_death_penalty,"onUpdate:modelValue":t[12]||(t[12]=e=>F.value.is_death_penalty=e)},null,8,["modelValue"])]),s("div",Ht,[C(" \u65E0\u671F\uFF1A"),l(A,{modelValue:F.value.is_life_imprisonment,"onUpdate:modelValue":t[13]||(t[13]=e=>F.value.is_life_imprisonment=e)},null,8,["modelValue"])]),s("div",Gt,[C(" \u7F13\u5211\uFF1A"),l(d(re),{modelValue:F.value.probation,"onUpdate:modelValue":t[14]||(t[14]=e=>F.value.probation=e),size:"small",placeholder:"\u5355\u4F4D\uFF08\u6708\uFF09",class:"judge_item_input"},null,8,["modelValue"]),l(c,{style:{"margin-left":"5px",cursor:"pointer"},size:"16px",onClick:t[15]||(t[15]=e=>ce(!0))},{default:o(()=>[l(d(xe),{color:"#6a1"})]),_:1})]),s("div",Qt,[C(" \u76D1\u7981\uFF1A"),l(d(re),{modelValue:F.value.term_of_imprisonment,"onUpdate:modelValue":t[16]||(t[16]=e=>F.value.term_of_imprisonment=e),size:"small",placeholder:"\u5355\u4F4D\uFF08\u6708\uFF09",class:"judge_item_input"},null,8,["modelValue"]),l(c,{style:{"margin-left":"5px",cursor:"pointer"},size:"16px",onClick:t[17]||(t[17]=e=>ce(!1))},{default:o(()=>[l(d(xe),{color:"#194"})]),_:1})]),s("div",Xt,[C(" \u7F5A\u6B3E\uFF1A"),l(d(re),{modelValue:F.value.punish_of_money,"onUpdate:modelValue":t[18]||(t[18]=e=>F.value.punish_of_money=e),size:"small",placeholder:"\u5355\u4F4D\uFF08\u5143\uFF09",class:"judge_item_input"},null,8,["modelValue"]),l(c,{style:{"margin-left":"5px",cursor:"pointer"},size:"16px",onClick:Se},{default:o(()=>[l(d(xe),{color:"#944"})]),_:1})]),s("div",Yt,[C(" \u7F6A\u540D\uFF1A"),l(d(re),{modelValue:F.value.accusation,"onUpdate:modelValue":t[19]||(t[19]=e=>F.value.accusation=e),size:"small",disabled:!0,class:"judge_item_input"},null,8,["modelValue"])])])]),s("div",Zt,[l(d(te),{plain:"",onClick:t[20]||(t[20]=e=>B(!1))},{default:o(()=>[C("\u524D\u4E00\u4E2A")]),_:1}),l(d(te),{type:"danger",disable:!0,plain:"",onClick:_e},{default:o(()=>[C("\u6E05\u7A7A")]),_:1}),l(d(te),{type:"primary",plain:"",onClick:ie},{default:o(()=>[C("\u9884\u89C8")]),_:1}),l(d(te),{type:"success",plain:"",onClick:a},{default:o(()=>[C("\u63D0\u4EA4")]),_:1}),l(d(te),{type:"warning",disable:!0,plain:"",onClick:ue},{default:o(()=>[C("\u8DF3\u8F6C")]),_:1}),l(d(te),{plain:"",onClick:t[21]||(t[21]=e=>B(!0))},{default:o(()=>[C("\u540E\u4E00\u4E2A")]),_:1})])])}}});const tl=pe(el,[["__scopeId","data-v-cdf15cb9"]]),ll=r=>(Fe("data-v-61913119"),r=r(),ke(),r),sl={class:"chooseContainer"},ul=ll(()=>s("div",{class:"lable"},"\u6807\u6CE8\u7ED3\u679C\u9884\u89C8\uFF1A",-1)),al={class:"chooseResult"},nl={key:0},ol={key:1},il=fe({__name:"chooseResult",props:["isValid"],emits:["expand"],setup(r,{emit:h}){const x=p(se(Y().markResult)),$=p(JSON.stringify(x,null,"	")),I=p(!1);Y().$subscribe((f,i)=>{$.value=JSON.stringify(se(Y().markResult),null,"	")},{detached:!1});const w=f=>{I.value=f,h("expand",f);let i=document.querySelectorAll(".chooseContainer")[0];f?i.style.height="400%":i.style.height="100%"};return(f,i)=>(n(),m("div",sl,[ul,s("div",al,[I.value?(n(),m("pre",ol,T($.value)+`
      `,1)):(n(),m("p",nl,T($.value),1))]),I.value?(n(),m("p",{key:1,class:"expand",onClick:i[1]||(i[1]=D=>w(!1))},"\u6536\u8D77")):(n(),m("p",{key:0,class:"expand",onClick:i[0]||(i[0]=D=>w(!0))},"\u5C55\u5F00"))]))}});const rl=pe(il,[["__scopeId","data-v-61913119"]]);var Qe={exports:{}};/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(r){(function(){var h=typeof window<"u"&&typeof window.document<"u"?window.document:{},x=r.exports,$=function(){for(var f,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],D=0,P=i.length,k={};D<P;D++)if(f=i[D],f&&f[1]in h){for(D=0;D<f.length;D++)k[i[0][D]]=f[D];return k}return!1}(),I={change:$.fullscreenchange,error:$.fullscreenerror},w={request:function(f,i){return new Promise(function(D,P){var k=function(){this.off("change",k),D()}.bind(this);this.on("change",k),f=f||h.documentElement;var v=f[$.requestFullscreen](i);v instanceof Promise&&v.then(k).catch(P)}.bind(this))},exit:function(){return new Promise(function(f,i){if(!this.isFullscreen){f();return}var D=function(){this.off("change",D),f()}.bind(this);this.on("change",D);var P=h[$.exitFullscreen]();P instanceof Promise&&P.then(D).catch(i)}.bind(this))},toggle:function(f,i){return this.isFullscreen?this.exit():this.request(f,i)},onchange:function(f){this.on("change",f)},onerror:function(f){this.on("error",f)},on:function(f,i){var D=I[f];D&&h.addEventListener(D,i,!1)},off:function(f,i){var D=I[f];D&&h.removeEventListener(D,i,!1)},raw:$};if(!$){x?r.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(w,{isFullscreen:{get:function(){return Boolean(h[$.fullscreenElement])}},element:{enumerable:!0,get:function(){return h[$.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(h[$.fullscreenEnabled])}}}),x?r.exports=w:window.screenfull=w})()})(Qe);const Xe=Qe.exports,Ye=r=>(Fe("data-v-0ac2103e"),r=r(),ke(),r),dl={class:"container"},cl={key:0,class:"item"},ml={class:"item"},fl={class:"item"},pl={class:"item status"},vl=Ye(()=>s("span",{class:"dot"},null,-1)),_l=Ye(()=>s("span",{class:"dot"},null,-1)),gl=fe({__name:"statusBar",props:["online","task"],emits:["offline"],setup(r,{emit:h}){const x=r,$=p(x.online),I=p(z().status),w=()=>{$.value&&($.value=!$.value,h("offline"),J.info("\u5DF2\u4E0B\u673A"))};return z().$subscribe((f,i)=>{I.value=se(z().status)},{detached:!1}),Je(()=>x.online,f=>{$.value=f,f&&Xe.request()}),(f,i)=>(n(),m("div",dl,[r.task!=""?(n(),m("div",cl,[s("div",ml,"\u5F53\u524D\u4EFB\u52A1\uFF1A"+T(r.task),1),s("div",fl,T(I.value),1)])):le("",!0),s("div",pl,[C(" \u5F53\u524D\u72B6\u6001:"),r.online?(n(),m("span",{key:1,class:"green",onClick:w},[_l,C("\u5DE5\u4F5C\u4E2D")])):(n(),m("span",{key:0,class:"grey",onClick:w},[vl,C("\u79BB\u7EBF")]))])]))}});const hl=pe(gl,[["__scopeId","data-v-0ac2103e"]]),ve=r=>(Fe("data-v-6f295f1d"),r=r(),ke(),r),Fl={class:"listPanel"},kl={class:"workList"},yl={class:"title"},El=ve(()=>s("div",null,"\u4EFB\u52A1\u5217\u8868\uFF1A",-1)),Cl={class:"views"},Al={key:0,class:"adminView"},xl={class:"selfView"},$l={class:"filiter"},bl={class:"workItems"},Bl={class:"actWorks"},wl=["onClick"],Dl={key:0},Il={key:0,class:"test"},Vl={key:1,class:"self"},Sl={key:0},Tl={key:0,class:"test"},Rl={key:1,class:"other"},zl={class:"workDetail"},Ol={class:"title"},Nl={class:"remark"},jl={class:"groups"},Ul=ve(()=>s("p",null,"\u53C2\u4E0E\u4EBA\u5458\uFF1A",-1)),Ll={class:"group"},ql={class:"member"},Pl={key:0},Ml={key:1},Kl=ve(()=>s("p",{class:"progress"},null,-1)),Jl={key:1,class:"allocation"},Wl=ve(()=>s("p",null,"\u4EFB\u52A1\u5206\u914D",-1)),Hl={class:"currentInfo"},Gl={class:"currentInfoTitle"},Ql=ve(()=>s("span",null,"\u5F53\u524D\u5206\u914D",-1)),Xl={key:0,class:"currentContent"},Yl=ve(()=>s("span",null,"\u8BE6\u60C5",-1)),Zl={key:1,class:"currentDetail"},es={class:"submit"},ts={class:"display"},ls={class:"dialog-footer"},ss={class:"dialog-footer"},us=fe({__name:"workListPanel",emits:["startWork"],setup(r,{emit:h}){p(!1);const x=p(!0),$=p(!1),I=p(""),w=p({id:0,name:"",remark:"",markman:"",validman:"",members:[],test:0}),f=p([]),i=p({id:0,name:"",remark:"",markman:"",validman:"",members:[],test:0}),D=p([]),P=p(0),k=p(""),v=_=>_.indexOf($e())!=-1,g=()=>{D.value=[],P.value=0},R=_=>{let a=_,B=0;for(let U of a){let O=parseInt(U.replace(/[^0-9]/ig,""));B+=O}P.value=B};p(""),p({username:"",nickname:""});const b=p([]),y=p([]),E=p({all:0,done:0,discard:0,doing:0,statis:p([]),details:p([])}),Z=p(!1),H=p(!1),F=(_,a,B=!1)=>{if(!i.value.isAllocate){alert("\u4EFB\u52A1\u8FD8\u672A\u5206\u914D");return}setTimeout(()=>{h("startWork",_,a,B)},200),J.success("\u6B63\u5728\u83B7\u53D6\u5217\u8868...")},ue=_=>{_==0||_==""||(E.value={all:0,done:0,discard:0,doing:0,statis:[],details:[]},q.get("/task/allocate/"+_).then(a=>{if(a.data==null){J.warning("\u6570\u636E\u4E3A\u7A7A");return}E.value.all=a.data.length;for(let B of a.data){B.status==1&&E.value.done++,B.status==0&&E.value.doing++,B.status==-1&&E.value.discard++;let U=ee(B.crime);U==-1?E.value.statis.push({crime:B.crime,ids:[B.id],count:1}):(E.value.statis[U].ids.push(B.id),E.value.statis[U].count++)}}))},ee=_=>{let a=0;for(let B of E.value.statis){if(B.crime==_)return a;a++}return-1},ne=_=>{he.confirm("\u786E\u8BA4\u5220\u9664?").then(()=>{q.delete("/task/batch",{data:se(_)}).then(a=>{a.data&&J.success("\u5220\u9664\u6210\u529F")})})},S=(_,a)=>{if(!i.value.isAllocate){alert("\u4EFB\u52A1\u8FD8\u672A\u5206\u914D");return}setTimeout(()=>{h("startWork",_,a+"\u3010\u6807\u6CE8\u7F16\u8F91\u3011",!0)},200)},X=()=>{q.get("/task").then(_=>{let a=_.data;a.reverse(),de()&&x.value?f.value=a:f.value=a.filter(B=>B.markman.indexOf($e())!=-1||B.validman.indexOf($e())!=-1)})},we=()=>{Z.value=!1,q.post("/task",w.value).then(_=>{f.value.push(w.value),w.value={id:0,name:"",remark:"",members:[],status:0,markman:"",validman:"",test:0},J.success("\u65B0\u589E\u6210\u529F")})},De=_=>{i.value=_,console.log(_);let a=_;i.value.members=[];let B=a.markman.split(":");i.value.members.push({groupKey:"\u6807\u6CE8",users:[{nickname:B[0],username:B[1]}]}),B=a.validman.split(":"),i.value.members.push({groupKey:"\u9A8C\u8BC1",users:[{nickname:B[0],username:B[1]}]}),q.get("/task/isAllocate/"+_.id).then(U=>{i.value.isAllocate=U.data}),de()&&ue(_.id)},ye=_=>{console.log(_);const a=$e();console.log(a);for(let B of _)if(B.username==a)return!0;return!1},Ee=_=>_.groupKey=="\u6807\u6CE8",Ce=_=>_.groupKey=="\u6807\u6CE8"?i.value.status==0:_.groupKey=="\u9A8C\u8BC1"?i.value.status==1:!1,ie=()=>{let _=i.value.id;q.get("/task/control/"+_).then(a=>{if(a.data){let B=i.value.status;i.value.status=1-B,J.success("\u63A7\u5236\u6743\u4EA4\u6362\u6210\u529F")}})},_e=()=>{de()&&q.get("/user/list").then(_=>{let a=_;b.value=a})},Ie=()=>{console.log(i.value),q.post("/task/update",i.value).then(_=>{console.log(_.data),_.data?J.success("\u4FEE\u6539\u6210\u529F"):J.warning("\u8BF7\u7A0D\u540E\u91CD\u8BD5")}),H.value=!1},oe=()=>{he.prompt("\u8F93\u5165\u9650\u5236\u6761\u6570\uFF0C\u65E0\u9650\u5236\u4E0D\u8F93\u5165","\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4"}).then(({value:_})=>{_==""&&(_="-1");let a=[],B={};for(let L of i.value.members)L.groupKey!="\u9A8C\u8BC1"&&(a.push(L.groupKey),B[L.groupKey]=L.users.map(ce=>ce.username));let U=D.value,O={tid:i.value.id,groupKey:a,uid:B,limit:_,crimeList:U.map(L=>L.substring(0,L.indexOf("(")))};console.log(O),q.post("/task/todo",O).then(L=>{L.data&&J.success("\u5206\u914D\u6210\u529F")})})},Ve=()=>{q.get("/crime/list").then(_=>{y.value=_.data})};return be(()=>{_e(),X(),Ve()}),(_,a)=>{const B=W("el-switch"),U=W("el-input"),O=W("el-icon"),L=W("el-button"),ce=W("el-checkbox"),Se=W("el-checkbox-group"),G=W("el-form-item"),Ae=W("el-divider"),u=W("el-option"),t=W("el-select"),c=W("el-form"),A=W("el-dialog");return n(),m(j,null,[s("div",Fl,[s("div",kl,[s("div",yl,[El,s("div",Cl,[d(de)()?(n(),m("div",Al,[l(B,{modelValue:x.value,"onUpdate:modelValue":a[0]||(a[0]=e=>x.value=e),"inline-prompt":"","active-text":"\u7BA1\u7406\u5458\u89C6\u89D2","inactive-text":"\u7528\u6237\u89C6\u89D2",onChange:X},null,8,["modelValue"])])):le("",!0),s("div",xl,[l(B,{modelValue:$.value,"onUpdate:modelValue":a[1]||(a[1]=e=>$.value=e),"inline-prompt":"","active-text":"\u81EA\u6211\u89C6\u89D2","inactive-text":"\u5168\u90E8\u89C6\u89D2"},null,8,["modelValue"])])]),s("div",$l,[l(U,{modelValue:I.value,"onUpdate:modelValue":a[2]||(a[2]=e=>I.value=e),size:"small",placeholder:"\u8FC7\u6EE4\u6761\u4EF6"},null,8,["modelValue"])])]),s("div",bl,[s("div",Bl,[(n(!0),m(j,null,M(f.value.filter(e=>e.name.indexOf(I.value)!=-1||e.remark.indexOf(I.value)!=-1),e=>(n(),m("div",{class:"workItem",onClick:V=>De(e)},[v(e.markman)?(n(),m("div",Dl,[e.test?(n(),m("div",Il,[l(O,{color:"red"},{default:o(()=>[l(d(Le))]),_:1}),s("span",null,T(e.name),1),s("span",null,[l(O,null,{default:o(()=>[l(d(Re),{color:"yellow"})]),_:1})])])):(n(),m("div",Vl,[l(O,{color:"green"},{default:o(()=>[l(d(qe))]),_:1}),s("span",null,T(e.name),1),s("span",null,[l(O,null,{default:o(()=>[l(d(Pe))]),_:1})])]))])):(n(),m(j,{key:1},[$.value?le("",!0):(n(),m("div",Sl,[e.test?(n(),m("div",Tl,[l(O,{color:"red"},{default:o(()=>[l(d(Le))]),_:1}),s("span",null,T(e.name),1),s("span",null,[l(O,null,{default:o(()=>[l(d(Re),{color:"yellow"})]),_:1})])])):(n(),m("div",Rl,[l(O,{color:"green"},{default:o(()=>[l(d(qe))]),_:1}),s("span",null,T(e.name),1),s("span",null,[l(O,null,{default:o(()=>[l(d(Pe))]),_:1})])]))]))],64))],8,wl))),256))]),d(de)()?(n(),m("div",{key:0,class:"addItem",onClick:a[3]||(a[3]=e=>Z.value=!0)},"+")):le("",!0)])]),s("div",zl,[s("div",Ol,T(i.value.name),1),s("div",Nl,T(i.value.remark),1),s("div",jl,[Ul,(n(!0),m(j,null,M(i.value.members,e=>(n(),m("div",null,[s("div",Ll,[C(T(e.groupKey)+"\uFF1A",1),(n(!0),m(j,null,M(e.users,V=>(n(),m("span",ql,T(V.nickname),1))),256)),ye(e.users)&&Ce(e)?(n(),m("span",Pl,[l(O,{style:{float:"right",cursor:"pointer"},color:"blue",size:"20px",onClick:ie},{default:o(()=>[l(d(nt))]),_:1}),Ee(e)?(n(),K(O,{key:0,style:{float:"right",right:"10px",cursor:"pointer"},color:"#E44F26",size:"20px",onClick:a[4]||(a[4]=V=>S(i.value.id,i.value.name))},{default:o(()=>[l(d(Me))]),_:1})):le("",!0),l(O,{style:{float:"right",right:"20px",cursor:"pointer"},color:"green",size:"20px",onClick:V=>F(i.value.id,i.value.name,e.groupKey=="\u9A8C\u8BC1")},{default:o(()=>[l(d(ot))]),_:2},1032,["onClick"])])):ye(e.users)&&!Ce(e)?(n(),m("span",Ml,[l(O,{style:{float:"right",right:"10px",cursor:"not-allowed"},color:"orange",size:"20px"},{default:o(()=>[l(d(it))]),_:1})])):le("",!0)]),Kl]))),256))]),i.value.id>0&&d(de)()?(n(),m("div",{key:0,class:"edit",onClick:a[5]||(a[5]=e=>H.value=!0)},[C("\u7F16\u8F91"),l(O,null,{default:o(()=>[l(d(Me))]),_:1})])):le("",!0),d(de)()?(n(),m("div",Jl,[Wl,s("div",Hl,[s("div",Gl,[Ql,s("span",{style:{cursor:"pointer"},onClick:a[6]||(a[6]=e=>ue(i.value.id))},[l(O,{color:"#a80"},{default:o(()=>[l(d(rt))]),_:1})])]),E.value.all!=0?(n(),m("div",Xl,[s("span",null,"\u603B\u6570\uFF1A"+T(E.value.all),1),s("span",null,"\u5DF2\u6807\u6CE8\uFF1A"+T(E.value.done),1),s("span",null,"\u4F5C\u5E9F\u6570\uFF1A"+T(E.value.discard),1),s("span",null,"\u8FDB\u884C\u4E2D\uFF1A"+T(E.value.doing),1)])):le("",!0),Yl,E.value.all!=0?(n(),m("div",Zl,[(n(!0),m(j,null,M(E.value.statis,e=>(n(),m("div",null,[s("span",null,T(e.crime),1),s("span",null,T(e.count),1),s("span",null,[l(L,{type:"danger",size:"small",round:"",onClick:V=>ne(e.ids)},{default:o(()=>[C("\u5220\u9664\u5DF2\u5206\u914D")]),_:2},1032,["onClick"])])]))),256))])):le("",!0)]),s("div",es,[l(L,{type:"warning",round:"",onClick:g},{default:o(()=>[C("\u6E05\u7A7A\u9009\u4E2D")]),_:1}),l(L,{type:"success",round:"",onClick:oe},{default:o(()=>[C("\u63D0\u4EA4")]),_:1})]),s("div",ts,[C("\u603B\u9009\u62E9\u6761\u6570\uFF1A"+T(P.value)+" ",1),l(U,{size:"small",placeholder:"\u8FC7\u6EE4","prefix-icon":d(dt),modelValue:k.value,"onUpdate:modelValue":a[7]||(a[7]=e=>k.value=e)},null,8,["prefix-icon","modelValue"])]),l(Se,{modelValue:D.value,"onUpdate:modelValue":a[8]||(a[8]=e=>D.value=e),onChange:R},{default:o(()=>[(n(!0),m(j,null,M(y.value.filter(e=>e.indexOf(k.value)!=-1),e=>(n(),K(ce,{label:e},null,8,["label"]))),256))]),_:1},8,["modelValue"])])):le("",!0)])]),s("div",null,[l(A,{modelValue:Z.value,"onUpdate:modelValue":a[14]||(a[14]=e=>Z.value=e),title:"\u65B0\u589E\u4EFB\u52A1"},{footer:o(()=>[s("span",ls,[l(L,{onClick:a[13]||(a[13]=e=>Z.value=!1)},{default:o(()=>[C("\u53D6\u6D88")]),_:1}),l(L,{type:"primary",onClick:we},{default:o(()=>[C(" \u786E\u8BA4 ")]),_:1})])]),default:o(()=>[l(c,{model:w.value},{default:o(()=>[l(G,{label:"\u540D\u79F0"},{default:o(()=>[l(U,{modelValue:w.value.name,"onUpdate:modelValue":a[9]||(a[9]=e=>w.value.name=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(G,{label:"\u5907\u6CE8"},{default:o(()=>[l(U,{modelValue:w.value.remark,"onUpdate:modelValue":a[10]||(a[10]=e=>w.value.remark=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(Ae,{"content-position":"left"},{default:o(()=>[C("\u53C2\u4E0E\u4EBA\u5458")]),_:1}),l(G,{label:"\u4EBA\u5458\u6DFB\u52A0\u6CE8\u610F\u4E8B\u9879"},{default:o(()=>[C(" \u4EBA\u5458\u5206\u4E3A\u6807\u6CE8\u3001\u9A8C\u8BC1 ")]),_:1}),l(G,{label:"\u6807\u6CE8"},{default:o(()=>[l(t,{modelValue:w.value.markman,"onUpdate:modelValue":a[11]||(a[11]=e=>w.value.markman=e),placeholder:"\u9009\u62E9\u7528\u6237"},{default:o(()=>[(n(!0),m(j,null,M(b.value,e=>(n(),K(u,{label:e.nickname,value:e.nickname+":"+e.username},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(G,{label:"\u9A8C\u8BC1"},{default:o(()=>[l(t,{modelValue:w.value.validman,"onUpdate:modelValue":a[12]||(a[12]=e=>w.value.validman=e),placeholder:"\u9009\u62E9\u7528\u6237"},{default:o(()=>[(n(!0),m(j,null,M(b.value,e=>(n(),K(u,{label:e.nickname,value:e.nickname+":"+e.username},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),s("div",null,[l(A,{modelValue:H.value,"onUpdate:modelValue":a[20]||(a[20]=e=>H.value=e),title:"\u7F16\u8F91"},{footer:o(()=>[s("span",ss,[l(L,{onClick:a[19]||(a[19]=e=>H.value=!1)},{default:o(()=>[C("\u53D6\u6D88")]),_:1}),l(L,{type:"primary",onClick:Ie},{default:o(()=>[C(" \u786E\u8BA4 ")]),_:1})])]),default:o(()=>[l(c,{model:i.value},{default:o(()=>[l(G,{label:"\u540D\u79F0"},{default:o(()=>[l(U,{modelValue:i.value.name,"onUpdate:modelValue":a[15]||(a[15]=e=>i.value.name=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(G,{label:"\u5907\u6CE8"},{default:o(()=>[l(U,{modelValue:i.value.remark,"onUpdate:modelValue":a[16]||(a[16]=e=>i.value.remark=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(Ae,{"content-position":"left"},{default:o(()=>[C("\u53C2\u4E0E\u4EBA\u5458")]),_:1}),l(G,{label:"\u4EBA\u5458\u6DFB\u52A0\u6CE8\u610F\u4E8B\u9879"},{default:o(()=>[C(" \u4EBA\u5458\u5206\u4E3A\u6807\u6CE8\u3001\u9A8C\u8BC1 ")]),_:1}),l(G,{label:"\u6807\u6CE8"},{default:o(()=>[l(t,{modelValue:i.value.markman,"onUpdate:modelValue":a[17]||(a[17]=e=>i.value.markman=e),placeholder:"\u9009\u62E9\u7528\u6237"},{default:o(()=>[(n(!0),m(j,null,M(b.value,e=>(n(),K(u,{label:e.nickname,value:e.nickname+":"+e.username},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(G,{label:"\u9A8C\u8BC1"},{default:o(()=>[l(t,{modelValue:i.value.validman,"onUpdate:modelValue":a[18]||(a[18]=e=>i.value.validman=e),placeholder:"\u9009\u62E9\u7528\u6237"},{default:o(()=>[(n(!0),m(j,null,M(b.value,e=>(n(),K(u,{label:e.nickname,value:e.nickname+":"+e.username},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])],64)}}});const as=pe(us,[["__scopeId","data-v-6f295f1d"]]),ns={class:"workspace"},os={class:"common-layout"},is={class:"statusBar"},rs={class:"main"},ds={class:"display"},cs={class:"result"},ms={class:"aside"},fs=fe({__name:"markWorkspace",setup(r){const h=p(!1),x=p(""),$=p(0),I=p(!1),w=p(!1),f=k=>{let v=document.querySelectorAll(".main .display")[0],g=document.querySelectorAll(".main .result")[0];console.log(k),k?(v.style.height="20%",g.style.height="80%"):(v.style.height="80%",g.style.height="20%")},i=(k,v,g=!1)=>{g?q.get("/task/check/"+k).then(R=>{if(R.msg=="\u6570\u636E\u4E3A\u7A7A"){J.warning("\u6682\u65E0\u5DF2\u6807\u6CE8\u7ED3\u679C");return}let b=R.data;z().updateList(b.map(y=>y.paperId)),z().updateTodoIds(b.map(y=>y.id)),z().updateRecordIds(b.map(y=>y.recordId)),x.value=v+"\u3010\u68C0\u9A8C\u6A21\u5F0F\u3011",h.value=!0,w.value=!0}):(q.get("/task/todo/"+k).then(R=>{let b=R.data;z().updateList(b.map(y=>y.paperId)),z().updateTodoIds(b.map(y=>y.id))}),x.value=v,h.value=!0,w.value=!1),$.value=k},D=()=>{I.value=!0;let k=Y().finalResult,v={};v.triggers=JSON.stringify(k.trigger),v.arguments=JSON.stringify(k.arguments),v.caseJudgement=JSON.stringify(k.case_judgement),v.caseName=k.case_name,v.caseFacts=k.case_facts,v.eventType=k.event_type,v.typeId=k.type_ID,v.todoId=z().currentId,v.tid=$.value,v.id=z().currentRecordId,q.post("/record",v).then(g=>{g.data?(J.success("\u63D0\u4EA4\u6210\u529F"),z().delete(z().currentId)):J.warning(g.data)}).finally(()=>{I.value=!1})},P=()=>{h.value=!1,x.value="",Xe.exit()};return be(()=>{}),(k,v)=>{const g=W("el-col"),R=W("el-row"),b=We("loading");return He((n(),m("div",ns,[s("div",os,[s("div",is,[l(hl,{online:h.value,task:x.value,onOffline:P},null,8,["online","task"])]),h.value?(n(),K(R,{key:1},{default:o(()=>[l(g,{span:18},{default:o(()=>[s("div",rs,[s("div",ds,[l(bt)]),s("div",cs,[l(rl,{onExpand:f,isValid:w.value},null,8,["isValid"])])])]),_:1}),l(g,{span:6},{default:o(()=>[s("div",ms,[l(tl,{onSubmitRecord:D,isValid:w.value},null,8,["isValid"])])]),_:1})]),_:1})):(n(),K(as,{key:0,class:"main",onStartWork:i}))])])),[[b,I.value]])}}});const gs=pe(fs,[["__scopeId","data-v-20460669"]]);export{gs as default};
