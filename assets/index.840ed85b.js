import{g as O}from"./greetUtil.0b1c6807.js";import{f as E,e as L,A as z,_ as N,l as p,o as F,y as M,n as m,m as r,c as B,F as b,p as w,h as W,a as e,z as u,q as D,t as n,B as X,C as J,D as H,G as Q,H as Y}from"./index.b14b041f.js";import{s as x}from"./request.ff065028.js";import{s as Z,a as ee,b as te,c as oe}from"./vue3-charts.esm.e43b9a04.js";const I="jinrishici-token";function se(o,s){return window.localStorage&&window.localStorage.getItem(I)?ne(o,s,window.localStorage.getItem(I)):ue(o,s)}function ue(o,s){return P(function(a){window.localStorage.setItem(I,a.token),o(a)},s,"https://v2.jinrishici.com/one.json?client=npm-sdk/1.0")}function ne(o,s,c){return c=c,P(o,s,"https://v2.jinrishici.com/one.json?client=npm-sdk/1.0&X-User-Token="+encodeURIComponent(c))}function P(o,s,c){var a=new XMLHttpRequest;a.open("get",c),a.withCredentials=!0,a.send(),a.onreadystatechange=function(){if(a.readyState===4){var i=JSON.parse(a.responseText);i.status==="success"?o(i):s?s(i):console.error("\u4ECA\u65E5\u8BD7\u8BCDAPI\u52A0\u8F7D\u5931\u8D25\uFF0C\u9519\u8BEF\u539F\u56E0\uFF1A"+i.errMessage)}}}const A=E([]),S=E([]),ae=L({name:"LineChart",components:{Chart:Z,Grid:ee,Line:te,Tooltip:oe},setup(){const o=E(A),s=E(S),c=E("horizontal"),a=E({left:0,top:20,right:20,bottom:0});return z(A.value,(i,t)=>{i.sort((v,g)=>parseInt(v.name)-parseInt(g.name)),o.value=i}),z(S.value,(i,t)=>{s.value=i}),{data:o,direction:c,margin:a,dataKeysList2:s}},methods:{loadProgress(){x.get("/dashboard/weekProgress").then(o=>{let s=new Set;Object.keys(o.data).forEach(c=>{let a=o.data[c],i={};for(let t of a)i[t.name]=t.count,i.name=t.date,s.add(t.name);A.value.push(i)}),S.value=[...s],A.value.sort((c,a)=>c.name-a.name)})},randomColor(){const o=Math.floor(Math.random()*256),s=Math.floor(Math.random()*256),c=Math.floor(Math.random()*256);return`#${o.toString(16)}${s.toString(16)}${c.toString(16)}`}},beforeMount(){this.loadProgress()}});function le(o,s,c,a,i,t){const v=p("Grid"),g=p("Line"),y=p("Tooltip"),k=p("Chart");return F(),M(k,{size:{width:1200,height:500},data:o.data,margin:o.margin},{layers:m(()=>[r(v,{strokeDasharray:"2,2"}),(F(!0),B(b,null,w(o.dataKeysList2,V=>(F(),M(g,{dataKeys:["name",V],lineStyle:{stroke:o.randomColor()},type:"monotone"},null,8,["dataKeys","lineStyle"]))),256))]),widgets:m(()=>[r(y,{borderColor:"#48CAE4",config:{name:{hide:!0}}})]),_:1},8,["data","margin"])}const ce=N(ae,[["render",le]]),ie=` 20230424_1857 \r
`,C=o=>(H("data-v-60b76d88"),o=o(),Q(),o),re={class:"index"},de={class:"grid-content dashboardStyle"},_e={class:"dashboard"},me={class:"greet"},pe={class:"name"},he={class:"content"},Ee={class:"left"},ve={class:"countAll count"},Fe={class:"num"},Ce={class:"countDaily count"},ge={class:"num"},fe={class:"countWeekly count"},Be={class:"num"},De={class:"sota count"},Ae={class:"sotaName"},be={class:"num"},we={class:"left"},ye={class:"countAll count"},ke={class:"num"},Ve={class:"countDaily count"},Se={class:"num"},xe={class:"countWeekly count"},Ie={class:"num"},$e={class:"sota count"},ze={class:"sotaName"},Me={class:"num"},Le={class:"right"},Ne=C(()=>e("div",{class:"tip"},"\u653E\u677E\u4E00\u523B\uFF1A",-1)),Pe={class:"poem"},je={class:"sentence"},Te={class:"from"},Ge={class:"projectProgress"},Ke=C(()=>e("div",{style:{"margin-bottom":"10px"}},"\u5F53\u524D\u9879\u76EE\u8FDB\u5EA6(\u6807\u6CE8\u9636\u6BB5)\uFF1A",-1)),Ue=C(()=>e("div",{style:{"margin-bottom":"10px","margin-top":"20px"}},"\u5F53\u524D\u9879\u76EE\u8FDB\u5EA6(\u9A8C\u8BC1\u9636\u6BB5)\uFF1A",-1)),Re={class:"grid-content"},qe=C(()=>e("div",{class:"title"},"\u9879\u76EE\u6210\u5458\u8FDB\u5EA6",-1)),Oe={class:"progress"},We={class:"chart"},Xe=C(()=>e("div",{class:"chartName"},"\u8FC7\u53BB\u4E00\u5468\u5DE5\u4F5C\u8D8B\u52BF\u56FE",-1)),Je={class:"count"},He=C(()=>e("div",{class:"chartName"},"\u7D2F\u79EF\u5DE5\u4F5C\u6570\u636E\u9762\u677F(\u4E00\u5206\u949F\u66F4\u65B0\u4E00\u6B21)",-1)),Qe={class:"dataPanel"},Ye=C(()=>e("div",{class:"header"},[e("div",null,"\u59D3\u540D"),e("div",null,"\u4E03\u65E5\u7EDF\u8BA1(\u6807\u6CE8)"),e("div",null,"\u603B\u7EDF\u8BA1(\u6807\u6CE8)"),e("div",null,"\u4E03\u65E5\u7EDF\u8BA1(\u9A8C\u8BC1)"),e("div",null,"\u603B\u7EDF\u8BA1(\u9A8C\u8BC1)")],-1)),Ze={class:"body"},et={class:"grid-content"},tt=C(()=>e("div",{class:"title"},"\u9879\u76EE\u901A\u77E5",-1)),ot={class:"grid-content"},st={class:"title"},ut=L({__name:"index",setup(o){const s=E([]),c=[{content:"\u5E73\u53F0\u6301\u7EED\u5B8C\u5584",timestamp:"now",size:"large",color:"#C0280f",icon:Y},{content:"\u6CD5\u5F8B\u6570\u636E\u5728\u7EBF\u6807\u6CE8\u5DE5\u5177\u66F4\u540D\u4E3A\u6CD5\u5F8B\u6570\u636E\u4E00\u7AD9\u5F0F\u5904\u7406\u5E73\u53F0",timestamp:"2023-04",color:"#0bbd87",size:"normal"},{content:"\u63A5\u5165ChatGPT\uFF0C\u5B9E\u73B0AI\u5FEB\u901F\u6807\u6CE8",timestamp:"2023-02",color:"#0bbd87",size:"normal"},{content:"\u521D\u7248\u5B9E\u73B0",timestamp:"2022-12",color:"#0bbd87",size:"normal"},{content:"\u5DE5\u5177\u89C4\u5212",timestamp:"2022-11",color:"#0bbd87",size:"normal"},{content:"\u9879\u76EE\u5F00\u7AEF",timestamp:"2022-10",size:"normal"}],a=[{color:"#f56c6c",percentage:10},{color:"#f58c6c",percentage:20},{color:"#f5ab6c",percentage:30},{color:"#f5cb6c",percentage:40},{color:"#e5f56c",percentage:50},{color:"#c5f56c",percentage:60},{color:"#a5f56c",percentage:70},{color:"#85f56c",percentage:80},{color:"#65f56c",percentage:90},{color:"#5cb87a",percentage:100}],i=[{title:"\u4E0B\u4E00\u5468\u9884\u8BA1\u5F00\u5C55\u7684\u4EFB\u52A1",content:"\u5B8C\u6210\u9884\u8BA1\u6807\u6CE8\u4EFB\u52A1"}],t=E({all:0,week:0,day:0,progress:0,best:"",sota:{name:"",count:0},allForValid:0,weekForValid:0,dayForValid:0,progressForValid:0,bestForValid:"",sotaForValid:{name:"",count:0}}),v=E({content:"",from:""}),g=E("1"),y=h=>{console.log(666)},k=()=>{location.reload()},V=()=>{x.get("/dashboard").then(h=>{t.value=h.data;let d=t.value.best.split(":");t.value.sota={name:d[0],count:d[1]==null?0:parseInt(d[1])};let _=t.value.bestForValid.split(":");t.value.sotaForValid={name:_[0],count:_[1]==null?0:parseInt(_[1])}})},j=()=>{x.get("/dashboard/countProgress").then(h=>{let d=new Map;d.set("\u9C9C\u56FD\u5DDD",1500),d.set("\u675C\u601D\u8FDC",1500),d.set("\u51B7\u54F2\u592B",1e3),d.set("\u5510\u90A6\u7693",1e3),d.set("\u65BD\u6E90",1e3),d.set("\u8D3E\u535A\u65B9",1e3),s.value=h.data.filter(_=>d.has(_.name)),s.value.forEach(_=>{_.goal=d.get(_.name)}),s.value.sort((_,f)=>f.allCountForValid-_.allCountForValid)})};return W(()=>{se(h=>{v.value.content=`\u201C${h.data.content}\u201D`,v.value.from=h.data.origin.author+"\xB7"+h.data.origin.title},h=>{console.log(h)}),V(),j()}),(h,d)=>{const _=p("el-progress"),f=p("el-col"),T=p("el-icon"),G=p("el-collapse-item"),K=p("el-collapse"),U=p("el-timeline-item"),R=p("el-timeline"),q=p("el-row");return F(),B("div",re,[r(q,{gutter:20},{default:m(()=>[r(f,{span:24},{default:m(()=>[e("div",de,[e("div",_e,[e("div",me,[e("span",pe,u(D(X)()),1),n(u(D(O)("")),1)]),e("div",he,[e("div",Ee,[e("div",ve,[n("\u7D2F\u79EF\u8D21\u732E\u6807\u6CE8"),e("span",Fe,u(t.value.all),1),n("\u6761\u6570\u636E")]),e("div",Ce,[n("\u4ECA\u65E5\u8D21\u732E\u6807\u6CE8"),e("span",ge,u(t.value.day),1),n("\u6761\u6570\u636E ")]),e("div",fe,[n("\u672C\u5468\u8D21\u732E\u6807\u6CE8"),e("span",Be,u(t.value.week),1),n("\u6761\u6570\u636E ")]),e("div",De,[n("\u6807\u6CE8\u4ECA\u65E5\u6700\u4F73\uFF1A"),e("span",Ae,u(t.value.sota.name),1),n(" ,\u76EE\u524D\u6807\u6CE8"),e("span",be,u(t.value.sota.count==null?0:t.value.sota.count),1),n("\u6761\u6570\u636E ")])]),e("div",we,[e("div",ye,[n("\u7D2F\u79EF\u8D21\u732E\u9A8C\u8BC1"),e("span",ke,u(t.value.allForValid),1),n("\u6761\u6570\u636E ")]),e("div",Ve,[n("\u4ECA\u65E5\u8D21\u732E\u9A8C\u8BC1"),e("span",Se,u(t.value.dayForValid),1),n("\u6761\u6570\u636E ")]),e("div",xe,[n("\u672C\u5468\u8D21\u732E\u9A8C\u8BC1"),e("span",Ie,u(t.value.weekForValid),1),n("\u6761\u6570\u636E ")]),e("div",$e,[n("\u9A8C\u8BC1\u4ECA\u65E5\u6700\u4F73\uFF1A"),e("span",ze,u(t.value.sotaForValid.name),1),n(" ,\u76EE\u524D\u6807\u6CE8"),e("span",Me,u(t.value.sotaForValid.count==null?0:t.value.sotaForValid.count),1),n("\u6761\u6570\u636E ")])]),e("div",Le,[Ne,e("div",Pe,[e("div",je,u(v.value.content),1),e("div",Te,"\u2014\u2014"+u(v.value.from),1)])])]),e("div",Ge,[Ke,r(_,{"stroke-width":10,percentage:t.value.progress,color:a},null,8,["percentage"]),Ue,r(_,{"stroke-width":10,percentage:t.value.progressForValid,color:a},null,8,["percentage"])])])])]),_:1}),r(f,{span:24},{default:m(()=>[e("div",Re,[qe,e("div",Oe,[e("div",We,[Xe,r(ce)]),e("div",Je,[He,e("div",Qe,[Ye,e("div",Ze,[(F(!0),B(b,null,w(s.value,l=>(F(),B("div",null,[e("div",null,u(l.name),1),e("div",null,u(l.weekCount),1),e("div",null,u(l.allCount),1),e("div",null,u(l.weekCountForValid),1),e("div",null,u(l.allCountForValid),1)]))),256))])])])])])]),_:1}),r(f,{span:14},{default:m(()=>[e("div",et,[tt,r(K,{modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=l=>g.value=l),accordion:""},{default:m(()=>[(F(),B(b,null,w(i,l=>r(G,{name:l.title},{title:m(()=>[n(u(l.title)+" ",1),r(T,{class:"header-icon",onClick:$=>y(l)},{default:m(()=>[r(D(J))]),_:2},1032,["onClick"])]),default:m(()=>[e("div",null,u(l.content),1)]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])])]),_:1}),r(f,{span:10},{default:m(()=>[e("div",ot,[e("div",st,[n("\u9879\u76EE\u8FDB\u5EA6"),e("span",{onClick:k,style:{"font-size":"14px",color:"#666"}},"(version:"+u(D(ie))+")",1)]),r(R,null,{default:m(()=>[(F(),B(b,null,w(c,(l,$)=>r(U,{key:$,icon:l.icon,color:l.color,size:l.size,timestamp:l.timestamp},{default:m(()=>[n(u(l.content),1)]),_:2},1032,["icon","color","size","timestamp"])),64))]),_:1})])]),_:1})]),_:1})])}}});const it=N(ut,[["__scopeId","data-v-60b76d88"]]);export{it as default};
